<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Motor (mindstorm.Mindstorm.NXT.Motor)</title><link rel="stylesheet" href="../../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../../index.html">mindstorm</a> &#x00BB; <a href="../../index.html">Mindstorm</a> &#x00BB; <a href="../index.html">NXT</a> &#x00BB; Motor</nav><h1>Module <code>NXT.Motor</code></h1><p>Output ports.</p></header><dl><dt class="spec type" id="type-port"><a href="#type-port" class="anchor"></a><code><span class="keyword">type</span> port</code></dt><dd><p>The three motor ports (immutable). For more readability of your program, it is recommended you give appropriate aliases to the ports of interest at the beginning of your program, e.g. <code>let motor_right = Mindstorm.NXT.Motor.a</code>.</p></dd></dl><dl><dt class="spec value" id="val-a"><a href="#val-a" class="anchor"></a><code><span class="keyword">val</span> a : <a href="index.html#type-port">port</a></code></dt><dd><p>The motor port A.</p></dd></dl><dl><dt class="spec value" id="val-b"><a href="#val-b" class="anchor"></a><code><span class="keyword">val</span> b : <a href="index.html#type-port">port</a></code></dt><dd><p>The motor port B.</p></dd></dl><dl><dt class="spec value" id="val-c"><a href="#val-c" class="anchor"></a><code><span class="keyword">val</span> c : <a href="index.html#type-port">port</a></code></dt><dd><p>The motor port C.</p></dd></dl><dl><dt class="spec value" id="val-all"><a href="#val-all" class="anchor"></a><code><span class="keyword">val</span> all : <a href="index.html#type-port">port</a></code></dt><dd><p>Special value representing all 3 ports.</p></dd></dl><dl><dt class="spec type" id="type-regulation"><a href="#type-regulation" class="anchor"></a><code><span class="keyword">type</span> regulation</code> = <code>[ </code><table class="variant"><tr id="type-regulation.Idle" class="anchored"><td class="def constructor"><a href="#type-regulation.Idle" class="anchor"></a><code>| </code><code>`Idle</code></td></tr><tr id="type-regulation.Motor_speed" class="anchored"><td class="def constructor"><a href="#type-regulation.Motor_speed" class="anchor"></a><code>| </code><code>`Motor_speed</code></td></tr><tr id="type-regulation.Motor_sync" class="anchored"><td class="def constructor"><a href="#type-regulation.Motor_sync" class="anchor"></a><code>| </code><code>`Motor_sync</code></td></tr></table><code> ]</code></dt><dd><p>Regulation mode.</p><ul><li><code>`Idle</code>: No regulation will be enabled.</li><li><code>`Motor_speed</code>: enable power control: auto adjust PWM duty cycle if motor is affected by physical load.</li><li><code>`Motor_sync</code>: enable synchronization: attempt to keep rotation in sync with another motor. You typically use this mode is to maintain a straight path for a vehicle robot automatically. You also can use this mode with the <a href="index.html#type-state"><code>Mindstorm.NXT.Motor.state</code></a> <code>turn_ratio</code> property to provide proportional turning. You must set <code>`Motor_sync</code> on at least two motor ports to have the desired affect. If it is set on all three motor ports, only the first two (A and B) are synchronized. .</li></ul></dd></dl><dl><dt class="spec type" id="type-run_state"><a href="#type-run_state" class="anchor"></a><code><span class="keyword">type</span> run_state</code> = <code>[ </code><table class="variant"><tr id="type-run_state.Idle" class="anchored"><td class="def constructor"><a href="#type-run_state.Idle" class="anchor"></a><code>| </code><code>`Idle</code></td></tr><tr id="type-run_state.Ramp_up" class="anchored"><td class="def constructor"><a href="#type-run_state.Ramp_up" class="anchor"></a><code>| </code><code>`Ramp_up</code></td></tr><tr id="type-run_state.Running" class="anchored"><td class="def constructor"><a href="#type-run_state.Running" class="anchor"></a><code>| </code><code>`Running</code></td></tr><tr id="type-run_state.Ramp_down" class="anchored"><td class="def constructor"><a href="#type-run_state.Ramp_down" class="anchor"></a><code>| </code><code>`Ramp_down</code></td></tr></table><code> ]</code></dt><dd><p>Specifies how to perform the transition to the new <code>speed</code> given in <a href="index.html#type-state"><code>Mindstorm.NXT.Motor.state</code></a>.</p><ul><li><code>`Idle</code>: The motor is not run.</li><li><code>`Running</code> enables power to any output device connected to the specified port(s).</li><li><code>`Ramp_up</code> enables automatic ramping to a new speed set-point that is greater than the current speed set-point. When you use <code>`Ramp_up</code> in conjunction with appropriate <code>tach_limit</code> and <code>speed</code> values, the NXT firmware attempts to increase the actual power smoothly to the <code>speed</code> set-point over the number of degrees specified by <code>tach_limit</code>.</li><li><code>`Ramp_down</code> enables automatic ramping to a new speed set-point that is less than the current speed set-point. When you use <code>`Ramp_down</code> in conjunction with appropriate <code>tach_limit</code> and <code>speed</code> values, the NXT firmware attempts to smoothly decrease the actual power to the <code>speed</code> set-point over the number of degrees specified by <code>tach_limit</code>.</li></ul></dd></dl><dl><dt class="spec type" id="type-state"><a href="#type-state" class="anchor"></a><code><span class="keyword">type</span> state</code><code> = </code><code>{</code><table class="record"><tr id="type-state.speed" class="anchored"><td class="def field"><a href="#type-state.speed" class="anchor"></a><code>speed : int;</code></td><td class="doc"><p>Power set-point. Range: -100 .. 100. Values larger than 100 will be taken as 100 and values less than -100 will be takes as -100.</p></td></tr><tr id="type-state.motor_on" class="anchored"><td class="def field"><a href="#type-state.motor_on" class="anchor"></a><code>motor_on : bool;</code></td><td class="doc"><p>if <code>true</code>, turns the motor on: enables pulse-width modulation (PWM) power according to speed.</p></td></tr><tr id="type-state.brake" class="anchored"><td class="def field"><a href="#type-state.brake" class="anchor"></a><code>brake : bool;</code></td><td class="doc"><p>Use run/brake instead of run/float. &quot;Braking&quot; in this sense means that the output voltage is not allowed to float between active PWM pulses. Electronic braking improves the accuracy (and is necessary to see a rotation at small speeds) of motor output, but uses slightly more battery power.</p></td></tr><tr id="type-state.regulation" class="anchored"><td class="def field"><a href="#type-state.regulation" class="anchor"></a><code>regulation : <a href="index.html#type-regulation">regulation</a>;</code></td><td class="doc"><p>Turns on the chosen regulation.</p></td></tr><tr id="type-state.turn_ratio" class="anchored"><td class="def field"><a href="#type-state.turn_ratio" class="anchor"></a><code>turn_ratio : int;</code></td><td class="doc"><p>Range: -100 .. 100. See <a href="index.html#type-regulation"><code>Mindstorm.NXT.Motor.regulation</code></a>.</p></td></tr><tr id="type-state.run_state" class="anchored"><td class="def field"><a href="#type-state.run_state" class="anchor"></a><code>run_state : <a href="index.html#type-run_state">run_state</a>;</code></td><td class="doc"><p>See <a href="index.html#type-run_state"><code>Mindstorm.NXT.Motor.run_state</code></a>.</p></td></tr><tr id="type-state.tach_limit" class="anchored"><td class="def field"><a href="#type-state.tach_limit" class="anchor"></a><code>tach_limit : int;</code></td><td class="doc"><p>Number of degrees to rotate; <code>0</code>: run forever. Range: 0 .. 4294967295 (unsigned 32 bits). See also <a href="index.html#type-run_state"><code>Mindstorm.NXT.Motor.run_state</code></a>.</p></td></tr></table><code>}</code></dt><dd><p>The absolute value of <code>speed</code> is used as a percentage of the full power capabilities of the motor. The sign of <code>speed</code> specifies rotation direction. You must set some other properties appropriately for the <code>speed</code> set-point to have the desired effect:</p><ul><li><code>motor_on</code> must be <code>true</code>.</li><li><code>run_state</code> must be set to a non-<code>`Idle</code> value.</li></ul><p>If <code>not motor_on &amp;&amp; not brake</code>, motors are in COAST mode: motors connected to the specified port(s) will rotate freely.</p></dd></dl><dl><dt class="spec value" id="val-speed"><a href="#val-speed" class="anchor"></a><code><span class="keyword">val</span> speed : ?&#8288;tach_limit:int <span>&#45;&gt;</span> ?&#8288;brake:bool <span>&#45;&gt;</span> ?&#8288;sync:bool <span>&#45;&gt;</span> ?&#8288;turn_ratio:int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-state">state</a></code></dt><dd><p><code>speed s</code> returns a state where <code>speed</code> is <code>s</code>, <code>motor_on</code> is <code>true</code> if and only if <code>s &lt;&gt; 0</code>, and <code>run_state = `Running</code>.</p><dl><dt>parameter tach_limit</dt><dd><p>set the number of degrees to rotate. The movement is unfortunately not fully accurate. Default: <code>0</code> which means &quot;no limit&quot;.</p></dd></dl><dl><dt>parameter brake</dt><dd><p>turns on brake. Default: <code>true</code>.</p></dd></dl><dl><dt>parameter sync</dt><dd><p>turn on <code>`Motor_sync</code>. Default: <code>false</code>.</p></dd></dl><dl><dt>parameter turn_ratio</dt><dd><p>set a turn-ratio. Default: <code>0</code>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-set"><a href="#val-set" class="anchor"></a><code><span class="keyword">val</span> set : ?&#8288;check_status:bool <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-conn">conn</a> <span>&#45;&gt;</span> <a href="index.html#type-port">port</a> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>set conn p st</code> sets the state of the motor connected to the port <code>p</code> to <code>st</code>.</p><dl><dt>parameter check_status</dt><dd><p>whether to check the status returned by the brick. Default: see <a href="../index.html#val-connect_bluetooth"><code>Mindstorm.NXT.connect_bluetooth</code></a>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-get"><a href="#val-get" class="anchor"></a><code><span class="keyword">val</span> get : <span class="type-var">'a</span> <a href="../index.html#type-conn">conn</a> <span>&#45;&gt;</span> <a href="index.html#type-port">port</a> <span>&#45;&gt;</span> <a href="index.html#type-state">state</a> * int * int * int</code></dt><dd><p><code>get conn p</code> returns <code>(state, tach_count, block_tach_count,
        rotation_count)</code> where</p><ul><li><code>state</code> is the current state of the motors;</li><li><code>tach_count</code> is the number of counts since the last reset of the motor counter (the reset occurs when <a href="index.html#val-set"><code>Mindstorm.NXT.Motor.set</code></a> is issued);</li><li><code>block_tach_count</code> is the current position relative to the last programmed movement.</li><li><code>rotation_count</code> is the program-relative position counter relative to the last reset of the rotation sensor for motorÂ <code>p</code>.</li></ul></dd></dl><dl><dt class="spec value" id="val-reset_pos"><a href="#val-reset_pos" class="anchor"></a><code><span class="keyword">val</span> reset_pos : ?&#8288;check_status:bool <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-conn">conn</a> <span>&#45;&gt;</span> ?&#8288;relative:bool <span>&#45;&gt;</span> <a href="index.html#type-port">port</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>reset_pos conn p</code> resets the rotation count (given by the <code>rotation_count</code> field of <a href="index.html#val-get"><code>Mindstorm.NXT.Motor.get</code></a>) of the motor connected to port <code>p</code>.</p><dl><dt>parameter relative</dt><dd><p>if <code>true</code>, relative to the last movement, otherwise absolute position. Default: <code>false</code>.</p></dd></dl><dl><dt>parameter check_status</dt><dd><p>whether to check the status returned by the brick. Default: see <a href="../index.html#val-connect_bluetooth"><code>Mindstorm.NXT.connect_bluetooth</code></a>.</p></dd></dl></dd></dl></div></body></html>