<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Message (mindstorm-lwt.Mindstorm_lwt.NXT.Message)</title><link rel="stylesheet" href="../../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">mindstorm-lwt</a> &#x00BB; <a href="../../index.html">Mindstorm_lwt</a> &#x00BB; <a href="../index.html">NXT</a> &#x00BB; Message</nav><header class="odoc-preamble"><h1>Module <code><span>NXT.Message</span></code></h1><p>Read and write messages from the 10 message queues. This can be thought as advanced direct commands.</p><p>Interesting information concerning this can be found in Sivan Toledo's paper: <a href="http://www.tau.ac.il/~stoledo/lego/btperformance.html">Analysis of the NXT Bluetooth-Communication Protocol</a>.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-mailbox" class="anchored"><a href="#type-mailbox" class="anchor"></a><code><span><span class="keyword">type</span> mailbox</span><span> = </span><span>[ </span></code><table><tr id="type-mailbox.B0" class="anchored"><td class="def constructor"><a href="#type-mailbox.B0" class="anchor"></a><code><span>| </span></code><code><span>`B0</span></code></td></tr><tr id="type-mailbox.B1" class="anchored"><td class="def constructor"><a href="#type-mailbox.B1" class="anchor"></a><code><span>| </span></code><code><span>`B1</span></code></td></tr><tr id="type-mailbox.B2" class="anchored"><td class="def constructor"><a href="#type-mailbox.B2" class="anchor"></a><code><span>| </span></code><code><span>`B2</span></code></td></tr><tr id="type-mailbox.B3" class="anchored"><td class="def constructor"><a href="#type-mailbox.B3" class="anchor"></a><code><span>| </span></code><code><span>`B3</span></code></td></tr><tr id="type-mailbox.B4" class="anchored"><td class="def constructor"><a href="#type-mailbox.B4" class="anchor"></a><code><span>| </span></code><code><span>`B4</span></code></td></tr><tr id="type-mailbox.B5" class="anchored"><td class="def constructor"><a href="#type-mailbox.B5" class="anchor"></a><code><span>| </span></code><code><span>`B5</span></code></td></tr><tr id="type-mailbox.B6" class="anchored"><td class="def constructor"><a href="#type-mailbox.B6" class="anchor"></a><code><span>| </span></code><code><span>`B6</span></code></td></tr><tr id="type-mailbox.B7" class="anchored"><td class="def constructor"><a href="#type-mailbox.B7" class="anchor"></a><code><span>| </span></code><code><span>`B7</span></code></td></tr><tr id="type-mailbox.B8" class="anchored"><td class="def constructor"><a href="#type-mailbox.B8" class="anchor"></a><code><span>| </span></code><code><span>`B8</span></code></td></tr><tr id="type-mailbox.B9" class="anchored"><td class="def constructor"><a href="#type-mailbox.B9" class="anchor"></a><code><span>| </span></code><code><span>`B9</span></code></td></tr></table><code><span> ]</span></code></div><div class="spec-doc"><p>The 10 available mailboxes on the NXT brick.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-remote" class="anchored"><a href="#type-remote" class="anchor"></a><code><span><span class="keyword">type</span> remote</span><span> = </span><span>[ </span></code><table><tr id="type-remote.R0" class="anchored"><td class="def constructor"><a href="#type-remote.R0" class="anchor"></a><code><span>| </span></code><code><span>`R0</span></code></td></tr><tr id="type-remote.R1" class="anchored"><td class="def constructor"><a href="#type-remote.R1" class="anchor"></a><code><span>| </span></code><code><span>`R1</span></code></td></tr><tr id="type-remote.R2" class="anchored"><td class="def constructor"><a href="#type-remote.R2" class="anchor"></a><code><span>| </span></code><code><span>`R2</span></code></td></tr><tr id="type-remote.R3" class="anchored"><td class="def constructor"><a href="#type-remote.R3" class="anchor"></a><code><span>| </span></code><code><span>`R3</span></code></td></tr><tr id="type-remote.R4" class="anchored"><td class="def constructor"><a href="#type-remote.R4" class="anchor"></a><code><span>| </span></code><code><span>`R4</span></code></td></tr><tr id="type-remote.R5" class="anchored"><td class="def constructor"><a href="#type-remote.R5" class="anchor"></a><code><span>| </span></code><code><span>`R5</span></code></td></tr><tr id="type-remote.R6" class="anchored"><td class="def constructor"><a href="#type-remote.R6" class="anchor"></a><code><span>| </span></code><code><span>`R6</span></code></td></tr><tr id="type-remote.R7" class="anchored"><td class="def constructor"><a href="#type-remote.R7" class="anchor"></a><code><span>| </span></code><code><span>`R7</span></code></td></tr><tr id="type-remote.R8" class="anchored"><td class="def constructor"><a href="#type-remote.R8" class="anchor"></a><code><span>| </span></code><code><span>`R8</span></code></td></tr><tr id="type-remote.R9" class="anchored"><td class="def constructor"><a href="#type-remote.R9" class="anchor"></a><code><span>| </span></code><code><span>`R9</span></code></td></tr></table><code><span> ]</span></code></div><div class="spec-doc"><p>Due to the master-slave relationship, slave devices may not initiate communication with their master, so they store outgoing messages in these mailboxes.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-write" class="anchored"><a href="#val-write" class="anchor"></a><code><span><span class="keyword">val</span> write : <span>?check_status:bool <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../index.html#type-conn">conn</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-mailbox">mailbox</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>write conn box msg</code> writes the message <code>msg</code> to the inbox <code>box</code> on the NXT. This is used to send messages to a currently running program.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">check_status</span> <p>whether to request a status code from the brick. If <code>true</code> (the default for this fonction), the NXT only send a reply when it is able to queue the message without overflowing the queue (this prevent message loss). If <code>false</code>, the message may delete the oldest message in the NXT queue if it is full (the NXT queues are 5 messages long).</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-read" class="anchored"><a href="#val-read" class="anchor"></a><code><span><span class="keyword">val</span> read : <span><span><span class="type-var">'a</span> <a href="../index.html#type-conn">conn</a></span> <span class="arrow">&#45;&gt;</span></span> <span>?remove:bool <span class="arrow">&#45;&gt;</span></span> <span><span>[ <a href="#type-mailbox">mailbox</a> <span>| <a href="#type-remote">remote</a></span> ]</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>read conn box</code> returns the message from the inbox <code>box</code> on the NXT.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">remove</span> <p>if true, clears the message from the remote inbox. Default: <code>false</code>.</p></li></ul></div></div></div></body></html>